# PCB
Process Control Block의 약자로, 프로세스 제어 블록이다.</br>
프로세스들은 여러개가 동시에 실행되는 것 같지만 time sharing을 통해서 빠른 속도로 왔다갔다 하면서 프로세스들을 처리해주고
여러개가 동시에 돌아가는 것 처럼 보이게 한다. 이때 프로세스가 교체되는 과정에서 프로세스의 작업을 저장하는 곳이 PCB이다.
> 프로세스란 프로세서에 의해 수행되는 프로그램 단위로 현재 실행 중이거나, 곧 실행 가능한 PCB를 가진 프로그램이다.
## PCB란?
* 운영체제가 프로세스를 제어하기 위해 정보를 저장해 놓는 곳으로, 프로세스의 상태 정보를 저장하는 구조체
* 프로세스가 생성되면 운영체제는 프로세스에 대한 PCB를 생성
* 프로세스의 중요한 부분을 포함하고 있기 때문에 주기억장치에서 관리


## PCB의 구조
* 프로세스 스케줄링 상태: '준비','일시중단' 등 프로세스가 CPU에 대한 소유권을 얻은 이후의 상태
* 프로세스 ID: 프로세스 ID, 해당 프로세스의 자식 프로세스 ID
* 프로그램 권한: 컴퓨터 자원 또는 I/O 디바이스에 대한 권한 정보
* 프로그램 카운터: 프로세스에서 실행해야 할 다음 명령어의 주소에 대한 포인터
* CPU 레지스터: 프로세스를 실행하기 위해 저장해야 할 레지스터에 대한 정보
* CPU 스케줄링 정보: CPU 스케줄러에 의해 중단된 시간 등에 대한 정보
* 계정 정보: 프로세스 실행에 사용된 CPU 사용량, 실행한 유저의 정보
* I/O 상태 정보: 프로세스에 할당된 I/O 디바이스 목록

---
</br>

# 문맥 교환 Context Swithing
* PCB 교환 과정으로 현재 진행하고 있는 프로세스의 상태를 PCB에 저장하고 다음 진행할 프로세스의
정보를 PCB에서 읽어 적용하는 과정이다.
* 한 프로세스에 할당된 시간이 끝나거나 인터럽트에 의해 발생

## Context Swithing이 필요한 이유
CPU는 한번에 하나의 프로세스만 수행할 수 있다. 하지만 실생활에서 여러 개의 프로세스를 동시에 수행하려고 한다.
하지만 컴퓨터는 동시에 수행할 수는 없고 **동시에 수행하는 것 처럼** 보이기 위해 여러개의 프로세스를 번갈아가며 수행한다.
이렇게 CPU가 프로세스를 바꿔가며 실행하기 위해서 문맥 교환이 필요하다. 

## Context Swithing 과정
<img width="529" alt="image" src="https://github.com/amazinguss/cs_study/assets/57309311/d2f5ba76-8c6e-4219-96d6-b203db266205">
1. Process P1 이 실행되는 도중 인터럽트나 시스템 콜이 발생한다.
2. PCB1에 P1의 정보를 저장하고 PCB2의 상태를 불러온다.
3. Process P2를 실행한다.
4. P2가 실행되는 도중 인터럽트나 시스템 콜이 발생한다.
5. PCB2에 P2의 정보를 저장하고 PCB1의 상태를 불러온다.
6. Process P1을 실행한다.

## Context Swithing의 단점
메모리 오버헤드가 발생한다.
Context Switching을 하면서 프로세스가 실행되기 전까지의 기다리는 시간, 메모리를 오버헤드라고 한다.

## Context Swithing 발생시기
* CPU 스케쥴링에 의해 할당된 작업시간이 끝나 timeout이 발생했을 때
* 프로세스의 작업이 끝났을 때
* 실행 중이던 프로세스가 입출력 요청을 할 때
  
